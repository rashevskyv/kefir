---
permalink: /fusee-gelee.html
title: Запуск пейлоадера через Fusée Gelée
author_profile: true
---
{% include toc title="Разделы" %}

{% spoiler Видеоинструкция %}

{% include youtube.html id="7P09JDC5y0s" %}
{: .text-center}
{: .notice--info}

{% endspoiler %}

Эта страница является пояснительной. На этой странице не рассматривается непосредственно запуск кастомной прошивки, а дана лишь теоретическая часть. Практическая часть будет дана далее, в процессе выполнения руководства.
{: .notice--warning}

## Информация об Fusée Gelée

Некоторые мобильные процессоры NVIDIA Tegra, выпущенные до 2016 года, содержат Уязвимость переполнения буфера в режиме восстановления BootROM ({% include abbr/rcm.txt abbr="RCM" %}). Злоумышленник с физическим доступом к USB-порту устройства и возможностью принудительной перезагрузки устройства в {% include abbr/rcm.txt abbr="RCM" %}, может использовать уязвимость для выполнения непроверенного кода.

**Fusée Gelée** - это цепочка эксплойтов для Nintendo Switch, построенная вокруг аппаратной уязвимости чипа Nvidia Tegra. С её помощью можно будет запускать не подписанный код на Nintendo Switch. Поскольку уязвимость аппаратная, её невозможно закрыть не меняя ревизии железа. Последние версии приставки, однако, лишены этой дыры, поэтому будьте внимательны при покупке устройства для прошивки. Узнать прошивается ли ваша приставка можно [тут](exploits){:target="_blank"}

## Что такое RCM

RCM - это штатный режим восстановления на Tegra-устройствах. Для того, чтобы войти в него, нужно выключить консоли, а затем зажать (POWER) + (VOL+) + (HOME). Но не тот (HOME), что мы видим на правом джойконе, а кнопку которую NVIDIA Tegra считает таковой. К сожалению, на самой приставке её нет. Нам понадобится отключить консоль, замкнуть определённый контакт на месте крепления правого joy-con и землю (для этого используется замыкатель), подключить консоль к ПК и отправить на неё пейлоадер любым удобным способом. Ниже мы рассмотрим подробнее как это делать.

## Как все это происходит

В общем виде цепочка такая - вы вставляете [замыкатель](#замыкатель) в приставку, вводите её в {% include abbr/rcm.txt abbr="RCM" %} и передаёте на неё полезную нагрузку, которая в свою очередь выполняет код на самой приставке. Полезную нагрузку, она же {% include abbr/payload.txt abbr="пейлоад" %}, можно передать через ПК, смартфон или специальный {% include abbr/dongle.txt abbr="донгл" %}, созданный исключительно для этого. Для простоты, любое устройство, способное передавать пейлоад мы будем назвать **хостом**. Для упрощения запуска прошивки, хост [можно встроить в саму приставку](){:target="_blank"}. Хост встроенный в приставку называется **чипом**. Разница между чипом и донглом в первую очередь в том, что первый всегда находится в приставке, запускает пейлоад сразу при её включении, а так же следит за тем, чтобы не допустить полного разряда приставки. 

## Что понадобится

* **Замыкатель**
* **Хост**
* Карта памяти (рекомендуемый объем 64Гб и более; минимальный - 4Гб)

### Замыкатель 

Для корректной активации цепочки нам понадобится замкнуть между собой 9-й и 10-й контакты (либо 7-й и 10-й, или 1-й и 10-й, все варианты работают одинаково хорошо) на месте установки правого контроллера. Это можно сделать несколькими способами: 

* Использовать обычную [канцелярскую скрепку](https://www.reddit.com/r/SwitchHacks/comments/8f0ugz/hardwarediy_switch_paperclip_jig_for_rcm_mode/){:target="_blank"}
* Использовать [кусочек фольги](https://xghostboyx.github.io/RCM-Guide/#tin_foil){:target="_blank"}
* Спаять между собой контакты непосредственно в самом joy-con [напрямую, или через резистор](https://xghostboyx.github.io/RCM-Guide/#soldered_joycon_710){:target="_blank"}
* [Вмонтировать в правый joy-con кнопку](https://www.reddit.com/r/SwitchHaxing/comments/8ho4h0/modded_my_joycon_to_have_a_clear_case_and_home/){:target="_blank"}
* Использовать [замыкатель, распечатанный на 3D-принтере](https://www.thingiverse.com/thing:2877484){:target="_blank"} (вы можете купить уже готовый: <a href="https://www.olx.ua/obyavlenie/nintendo-switch-rcm-jig-zamykatel-IDHW6Vb.html" target="_blank"><img src="/images/ua.png" alt="Украина" style="vertical-align: baseline !important;"></a>, <a href="https://vk.com/market-102933233?w=product-102933233_2039087_23eff2d92b12968546" target="_blank"><img src="/images/ru.png" alt="Россия" style="vertical-align: baseline !important;"></a>)
* [И другие способы](https://gbatemp.net/threads/the-ultimate-list-of-mods-to-enter-rcm.502145/){:target="_blank"}

Далее в инструкции под словом "замыкатель" будет подразумеваться любой из этих способов

### Хост 

В качестве хоста можно использовать: 
* Донгл 
* ПК 
	* Вам так же понадобится USB-C / USB-A кабель, чтобы подключить приставку к ПК. Обратите внимание, **кабель должен поддерживать передачу данных**! 
* Мобильный телефон 
	* Вам так же понадобится USB-C / USB-C кабель, чтобы подключить приставку к телефону, либо USB-C / USB-A кабель и OTG-переходник. Телефон так же должен поддерживать OTG. Если у вас iPhone, то на нём должен быть jailbrake!

## Инструкция

### Часть I - Вход в RCM

1. Если в приставку вставлен картридж - вытащите его
1. Выключите консоль
1. Отсоедините правый joy-con и ставьте **замыкатель** в направляющую **правого** джойкона до упора 
	![](https://cdn.thingiverse.com/renders/a7/54/70/c4/3a/52e69bd058c5f59ef94f53c6d81c93c2_preview_featured.jpg) 
	{: .text-center}
	{: .notice--info}
1. Зажмите (VOL+) и включите приставку, не отпуская кнопку громкости
1. Можете достать замыкатель

На экране приставки не должно ничего происходить. Если после подключения кабеля экран остаётся чёрным, то вы все делаете правильно! Если экран загорается надписью Nintendo - отключите консоль и повторите всё заново.
{: .notice--warning}

Может не получаться по следующим причинам:
* Замкнуты не те контакты
* Замыкатель ничего не замыкает, например проволока порвалась и контакты не замыкаются, или он изначально собран с ошибками
* Кнопки зажаты не одновременно. Пробуйте зажимать вначале (VOL+), а затем, не отпуская её, нажмите (POWER)

{% spoiler Видеоинструкция %}

{% include youtube.html id="RIuwYF7_LoI" start="162" %}
{: .text-center}
{: .notice--info}

{% endspoiler %}

В случае успеха на экране не будет происходить ничего. В случае неудачи запустится официальная прошивка
{: .notice--success}

### Часть II - Проброс пейлоада

К этому моменту приставка уже должна находиться в режиме RCM!
{: .notice--warning}

В зависимости от ситуации, пробрасываемый пейлоад может быть разным. Мы намеренно не указываем на этой странице какой пейлоад нужно пробросить. В явном виде это будет сказано на соответствующих страницах. Чаще всего вы будет пробрасывать гекату, которая находится в составе кефира в виде `payload.bin`

{% spoiler Запуск через донгл %}

Донгл - это автономное устройство, которое создано исключительно для удобного запуска взлома. 

## Что понадобится

{% include abbr/dongle.txt abbr="Донгл" %} необходимо зарядить комплектным кабелем, либо вставить во **включённую** приставку
{: .notice--warning}

* Сам [{% include abbr/dongle.txt abbr="донгл" %}](http://shop.customfw.xyz){:target="_blank"}
* Установленная на донгле {% include abbr/hekate.txt abbr="hekate" %}
	* Инструкция для [R4S](r4#прошивка-донгла){:target="_blank"}
	* Инструкция для [RCMLoader](rcmloader#прошивка-донгла){:target="_blank"}
* Приставка должна находиться в режиме [RCM](#%D1%87%D0%B0%D1%81%D1%82%D1%8C-i---%D0%B2%D1%85%D0%BE%D0%B4-%D0%B2-rcm)

## Инструкция 

* Для запуска кастомной прошивки вставьте донгл в приставку
	* Приставка должна находиться в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}.
* Для запуска {% include abbr/hekate.txt abbr="hekate" %} просто вставьте {% include abbr/dongle.txt abbr="донгл" %} в приставку, когда появится сплешскрин кефира, нажмите кнопку уменьшения громкости
* Для запуска любого другого пейлоада читайте дальше 

{% spoiler Запуск любого пейлоада на донгле с hekate %}
#### Что понадобится

* {% include abbr/payload.txt abbr="Пейлоад" %}, который вы собираетесь запускать
	* Для запуска {% include abbr/hekate.txt abbr="hekate" %} она должна быть прошита в {% include abbr/dongle.txt abbr="донгл" %}, дополнительно её никуда не нужно скидывать
* Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}

Ниже описан метод запуска вообще любого пейлоада с помощью {% include abbr/dongle.txt abbr="донгла" %}, на котором прошита {% include abbr/hekate.txt abbr="hekate" %}. Если в вашем донгле не {% include abbr/hekate.txt abbr="hekate" %}, а SX OS, метод запуска [будет отличаться](fusee-gelee#sx-os-pro--r4s-dongle-с-прошитым-пейлоадом-от-sx-os). 
{: .notice--info}

1. Установите на приставку {% include abbr/kefir_addr.txt %}
1. Вставьте донгл в консоль
1. Когда появится сплешскрин кефира, нажмите (VOL-), вы попадёте в гекату
{% include inc/mount_sd.md %}
1. Поместите {% include abbr/payload.txt abbr="пейлоад" %}, который вы собираетесь запускать в папку `bootloader/payloads`
1. [Безопасно извлеките](https://ru.wikipedia.org/wiki/Безопасное_извлечение_устройства){:target="_blank"} вашу карту памяти из ПК (устройство будет назвыаться "**UMS**") и нажмите в hekate "**Close**"
	* Если вы вытаскивали карту из приставки, просто вставьте её обратно в приставку
1. В hekate перейдите в главное меню и нажмите **Payloads...** -> **%ваш_пейлоад%.bin**
1. Пейлоад запустится на консоли
{% endspoiler %}

{% spoiler Запуск любого пейлоада на донгле с SX OS %}

### Что понадобится

* Xecuter Dongle, входящий в комплект SX PRO 
	* Либо любой другой {% include abbr/dongle.txt abbr="донгл" %} с прошитым пейлоадом от SX OS
		* Инструкция для [R4S](r4#прошивка-донгла){:target="_blank"}
		* Инструкция для [RCMLoader](rcmloader#прошивка-донгла){:target="_blank"}
* {% include abbr/payload.txt abbr="Пейлоад" %}, который вы собираетесь запускать
* Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}

Донгл необходимо зарядить комплектным кабелем, либо вставить ненадолго во **включённую** приставку
{: .notice--warning}

### Запуск пейлоада

Приставка должна находиться в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}!
{: .notice--info}

1. Установите на приставку {% include abbr/kefir_addr.txt %}
1. Вставьте карту памяти приставки в ПК 
	* Приставка находится в режиме RCM, вы можете свободно извлекать из неё карту безо всяких дополнительных манипуляций. Выключать для извлечения карты приставку не нужно, иначе придётся снова вводить её в режим RCM
1. Поместите пейлоад, который вы собираетесь запускать в корень карты памяти
1. Вставьте карту памяти обратно в консоль
1. Вставьте донгл в консоль
1. При появлении загрузочного экрана SX OS, зажмите и удерживайте (VOL+) до тех пор, пока не появится меню прошивки
1. Приставка загрузится в меню SX OS 
1. Выберите "**Options**"
1. Выберите "**Launch external payload**"
1. Выберите пейлоад, который хотите запустить
1. Пейлоад запустится на консоли
{% endspoiler %}
{% endspoiler %}

{% spoiler Запуск на Windows %}
## Что понадобится

* Свежая версия [TegraRcmGUI](https://github.com/eliboa/TegraRcmGUI/releases/latest){:target="_blank"}
* {% include abbr/payload.txt abbr="Пейлоад" %}, который вы собираетесь запускать на приставке
* USB type-С на USB type-A кабель для подключения Switch к ПК 
* Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}

## Установка драйверов 

Если драйвера уже были установлены, пропустите эту часть
{: .notice--info}

1. Запустите [`TegraRcmGUI.exe`](https://github.com/eliboa/TegraRcmGUI/releases/latest){:target="_blank"} от имени Администратора 
1. Перейдите во вкладку `Settings` и нажмите "**Install Driver**"
1. Установите драйвер
1. После успешной установки драйвера закройте программу 

## Запуск пейлоада

1. Подключите приставку, находящуюся в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"} к ПК
1. Запустите [`TegraRcmGUI.exe`](https://github.com/eliboa/TegraRcmGUI/releases/latest){:target="_blank"} от имени Администратора 

![]({{ base_path }}/images/screenshots/tegrarcmgui.png) 
{: .text-center}
{: .notice--info}

1. Нажмите на кнопку ![](/images/screenshots/search.png) и выберите пейлоад, который собираетесь запустить
1. Нажмите на кнопку "**Inject Payload**", чтобы отправить пейлоад на консоль
1. Пейлоад запустится на консоли
	* Если пейлоад не запускается, проверьте правильно ли установлены драйвера. Правильно установленный драйвер устройства будет отображаться в диспетчере устройств как `libusbK USB Devices`
	* Попробуйте передать пейлоад ещё раз
	* Кнопкой ![](/images/screenshots/add_to_fav.png) можно добавить пейлоад в избранное 

{% endspoiler %}

{% spoiler Запуск на macOS %}

## Что понадобится

* {% include abbr/payload.txt abbr="Пейлоад" %}, который вы собираетесь запускать на приставке
* USB type-С на USB type-A для подключения Switch к Маку
* Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}

## Установка NXBoot

Установить и запустить NXBoot можно двумя способами:

### *В ручном режиме* 

Для установки утилиты NXBoot, с помощью которой пейлоадеры будут доставляться на консоль, необходимо открыть программу Terminal и вставить следующий код:

`sudo curl -L https://mologie.de/~oliver/mologie.github.io/nxboot/bin/nxboot -o /usr/local/bin/nxboot && sudo chmod +x /usr/local/bin/nxboot`

Таким образом, за одну операцию с [официального сайта](https://mologie.github.io/nxboot/){:target="_blank"} скачивается утилита, сохраняется в директории `/usr/local/bin/` для того, чтоб не указывать путь до файла при запуске, и задаются права на исполнение.

### *Автоматически* 

Для автоматической загрузки NXBoot и доставки пейлоада на консоль необходимо запустить программу [PayloadStarter](https://github.com/KnightOfSteel/payload_starter/releases){:target="_blank"} и выбрать нужный {% include abbr/payload.txt abbr="пейлоад" %}.

## Запуск пейлоада

Запустить пейлоад можно также двумя способами: 

### **В ручном режиме.**

Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}
{: .notice--warning}

1. Откройте программу **Terminal** и выполните следующую команду: `nxboot /путь/до/пейлоада`
	* Путь должен быть прописан непосредственно до `.bin`-файла пейлоада
	* Чтоб не прописывать путь вручную, можно написать в терминале `nxboot` и перетянуть туда мышкой `.bin`-файл пейлоада
	* Если пейлоад не запускается, скорее всего консоль находится не в режиме RCM
1. После успешного выполнения `nxboot` вы увидите на экране следующий текст `success: payload was run. exiting, fair winds!`
1. Можете доставать замыкатель

### **В автоматическом режиме.** 

Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}
{: .notice--warning}

1. Подключите Switch к компьютеру
1. Запустите **PayloadStarter**
1. Выберите требуемый `payload.bin`
1. Дождитесь завершения процесса (зависит от вашего интернет-соединения и быстродействия компьютера)
1. Если все прошло успешно, то на вашем Switch запуститься выбранный payload и можно достать замыкатель

{% endspoiler %}

{% spoiler Запуск на Android %}
## Что понадобится

* {% include abbr/payload.txt abbr="Пейлоад" %}, который вы собираетесь запускать на приставке
* Устройство на базе Android, работающий с OTG
* USB type-С на USB type-С для подключения Switch к устройству на Android, либо OTG-переходник
* Установленная программа [Rekado](https://github.com/MenosGrante/Rekado/releases/latest){:target="_blank"}
* Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}

## Запуск пейлоада

1. Запустите **Rekado** на вашем Android-смартфоне
1. Перейдите в раздел "**Payloads**" и дайте права на работу с накопителем, если программа их попросит
1. Нажмите на кнопку `+` и выберите необходимый для запуска пейлоад
1. Подключите Switch к вашему устройству с помощью кабеля 
1. Телефон спросит использовать ли **Rekado** для подклбчения по умолчанию. Ответьте утвердительно
1. Нажмите "**Boot Payload**" и выберите ваш {пейлоад
{% endspoiler %}

{% spoiler Запуск на любой платформе, на которой есть браузер %}
## Что понадобится

* {% include abbr/payload.txt abbr="Пейлоад" %}, который вы собираетесь запускать на приставке
* USB type-С на USB type-A кабель для подключения Switch к {% include abbr/host.txt abbr="хосту" %}
* Браузер Chrome (с другими браузерами работать не будет!)
* Приставка должна быть в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}

## Запуск пейлоада

Приставка должна находиться в [режиме RCM](fusee-gelee#часть-i---вход-в-rcm){:target="_blank"}!
{: .notice--info}

1. Откройте эту [веб-страницу](https://webcfw.sdsetup.com/){:target="_blank"} и включите Русский язык
1. В части "**Настройки отправки пейлоада**" выберите пейлоадиз списка "**Загрузить свой пейлоад**", нажмите "**Выберите файл**", после чего выберите `.bin`-файл вашего пейлоада
	* Не выбирайте пейлоадиз списка! Используйте тот, что в архиве, иначе вы рискуете получить ошибку на том или ином этапе прошивки! 
1. Нажмите "**Deliver payload!**"
1. В открывшемся окне выберите "**APX**" и нажмите "**Подключение**"
1. пейлоадзапустится на консоли
1. Можете доставать замыкатель
{% endspoiler %}

___

# Следующий шаг: [Подготовительные работы](preparation-fuse)
{: .notice--success}
