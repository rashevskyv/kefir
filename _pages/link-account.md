---
permalink: /link-account.html
title: Связывание учётной записи консоли с аккаунтом Nintendo
author_profile: true
---

Некоторые игры, например, NES Online, или последние версии Mortal Kombat 11, требуют, чтобы на консоли был привязан аккаунт Nintendo. Проверяется сам факт привязки, поэтому совершенно не важно, находитесь ли вы онлайн или оффлайн - игра будет проверять наличие привязки и откажется работать, если не найдёт привязанного аккаунта на приставке. Если у вас приставка ещё не прошита и находится на официальной прошивке с версией системного ПО {% include /vars/sys_version.txt %}, или вам плевать на увеличение вероятности бана, то привяжите аккаунт просто войдя в eShop. Если же вы уже забанен, прошит, просто не хотите пускать приставку онлайн, вам подойдёт нижеописанный способ 

**ВНИМАНИЕ!!** Не игнорируйте необходимость [создания бекапа](backup-nand){:target="_blank"}! Всегда есть вероятность, что что-то может пойти не так и ваша приставка перестанет загружаться! 
{: .notice--danger}

Выберите один из методов:

{% spoiler Замена имеющихся аккаунтов на связанный в автоматическом режиме %}

{% spoiler Замена аккаунтов %}
**ВНИМАНИЕ!!** ОБЯЗАТЕЛЬНО сделайте [резервные копии сохранений](backup-saves){:target="_blank"} со всех ваших аккаунтов! Метод не добавляет связанный аккаунт, а заменяет все имеющиеся аккаунты на приставке на связанный аккаунт! Таким образом, к концу инструкции у вас будет всего один аккаунт, но привязанный к учётной записи Nintendo, так что вам придётся создать все нужные аккаунты заново и восстановить сохранения из резервной копии! 
{: .notice--danger}

Если ваша прошивка {% include /vars/sys_version.txt %}\вы недавно делали резервную копию NAND\обновляли кефир, то пропустите то действие, которое вы выполняли недавно
{: .notice--info}

1. Обновите {% include abbr/kefir_addr.txt %} по инструкции из репозитория, если не делали этого ранее
1. Обновите [прошивку приставки](update-to-latest){:target="_blank"}
1. Создайте [резервную копию NAND](backup-nand){:target="_blank"} консоли и поместите её в надёжное место, если ещё не сделали этого
1. Запустите прошивку
1. Сделайте [резервные копии сохранений](backup-saves){:target="_blank"} со всех ваших аккаунтов
1. Запустите [Homebrew Launcher](hbl){:target="_blank"}
1. Запустите **Link Account**
1. Выберите пункт **"Link Account"**
1. Выберите **"Link"**
1. Выберите **"Si"** для того, чтобы начать закачку файлов аккаунта и внедрения их в систему
1. Выберите **"Si"** для перезагрузки

После перезагрузки в вашей системе будет всего один аккаунт, но привязанный к учётной записи Nintendo. Если необходимо, создайте дополнительные аккаунты, но не удаляйте привязанный! [Восстановите сохранения из резервной копии](backup-saves#восстановление-резервных-копий-сохранений){:target="_blank"}, если это необходимо! 
{: .notice--info}
{% endspoiler %}

{% spoiler Восстановление аккаунтов, что были до замены %}

**ВНИМАНИЕ!!** Способ тестировался только на прошивке 8.0.1. Хотя, в теории, должен работать и на системном ПО с иной версией!
{: .notice--warning}

1. Вставьте карту памяти в ПК 
1. Перейдите в папку `/switch/UserLink/`
1. Удалите папку `su`
1. Перейдите в папку `sume` и переместите папку `su` из неё на директорию выше (то есть в папку `/switch/UserLink/`)
1. Сделайте замену аккаунтов
    * В итоге после замены, ваш привязанный аккаунт окажется в папке `sume`

{% endspoiler %}

{% endspoiler %}

{% spoiler Связывание аккаунта в ручном режиме без удаления %}

#### Что понадобится 

* Файл [8000000000000010](files/8000000000000010){: target="blank_"}, содержащий в себе профиль с привязанным аккаунтом 
* Свежая версия [memloader](https://switchtools.sshnuke.net/){:target="_blank"}
* Свежая версия [hactoolnet.exe](https://github.com/Thealexbarney/LibHac/releases/latest){:target="_blank"}
* Свежая версия [HacDiskMount](https://switchtools.sshnuke.net/){:target="_blank"}
* USB type-C кабель для подключения Switch к ПК 
* ПК на базе ОС Windows (может не работать на виртуальной машине)

##### Часть I - получаем ключи для актуальной версии системного ПО

Несмотря на то, что у вас уже есть ключи, полученные  входе бекапа, они могут отличаться на рекомендуемой версии системного ПО, поэтому их придётся снимать ещё раз

{% include inc/launch-hekate.txt %}
1. Перейдите в меню "**Payloads**"
1. Выберите "**Lockpick_RCM.bin**"
1. Нажмите кнопку (POWER), чтобы перезагрузиться в Sept и начать дамп ключей оттуда
1. Нажмите кнопку (POWER), чтобы выключить приставку
1. Вставьте карту памяти приставки в ПК и скопируйте на ПК файл `/switch/prod.key` в папку, в пути которой и имени не встречаются никаких символов, кроме символов латинского алфавита

##### Часть II - подписываем файл аккаунта своими ключами

1. Скопируйте [`hactoolnet.exe`](https://github.com/Thealexbarney/LibHac/releases/latest){:target="_blank"} в ту же папку, где положили ключи
1. В эту же папку поместите [`8000000000000010`](files/8000000000000010){: target="blank_"}
1. Откройте командную строку в этой же папке и выполните `hactoolnet.exe -k prod.keys -t save 8000000000000010 --sign`
	Сообщение об успехе выглядит примерно так: 
	<pre>
	C:\>hactoolnet.exe -k prod.keys -t save 8000000000000010 --sign
	Failed to match key eticket_rsa_kek_source
	Failed to match key eticket_rsa_kekek_source
	Failed to match key rsa_oaep_kek_generation_source
	Failed to match key rsa_private_kek_generation_source
	Failed to match key ssl_rsa_kek_source_x
	Failed to match key ssl_rsa_kek_source_y
	Successfully signed save file
	</pre>
1. Скопируйте **содержимое** папки `sample` из `.zip`-архива с [memloader](https://switchtools.sshnuke.net/){:target="_blank"} в **корень** вашей карты памяти
1. Скопируйте пейлоад `memloader.bin` в папку `bootloader/payloads`
1. Верните карту памяти обратно в Switch
{% include inc/launch-hekate.txt %}
1. Перейдите в меню "**Payloads**"
1. Выберите "**memloader.bin**"
1. Выберите "**ums_emmc.ini**"
1. Когда экран погаснет, подключите Switch к ПК
1. Распакуйте [HacDiskMount](https://switchtools.sshnuke.net/){:target="_blank"} в удобную папку
1. Запустите `HacDiskMount.exe` от имени администратора 
1. Выберите  "**File**" -> "**Open Physical**"
1. Выберите `UMS Linux Disk 0 (29.121GiB)`
1. Вы увидите полный список разделов, содержащихся в этом диске

![]({{ base_path }}/images/screenshots/hdm_disk.png) 
{: .text-center}
{: .notice--info}

1. Дважды нажмите на `SYSTEM`
1. Откройте файл `prod.keys`, который мы получили при создании дампа ключей в Части I
1. В разделе "**bis_key_02**" есть длинная 64-х символьная последовательность,  первые 32 символа - это - "**Crypto**", последние - "**Tweak**". В файле с ключами ключи делятся попарно. В каждой паре есть так же ключ с меткой "**Crypto**" (crypt) и "**Tweak**" (tweak). 

![]({{ base_path }}/images/screenshots/hdm_key_test.png) 
{: .text-center}
{: .notice--info}
	
1. Скопируйте ключи соответственно их меткам  из текстового файла `prod.keys` в окно программы и нажмите кнопку "**Test**"
1. Рядом с кнопкой высветится надпись зелёного цвета (**OK! Enthropy: (tested)**), то ключ скопирован верно - нажмите кнопку "**Save**" и закройте окно (не программу!)
1. Обратите внимание на раздел "**Virtual Drive**"
1. Если там написано "**Driver not installed**", нажмите на кнопку "**Install**"
1. Надпись должна смениться на "**Driver (ver 2017.0.3.20) installed, service is running**"	
1. В поле "**Drive letter**" выберите не занятую букву диска 
1. Отметьте галочкой поле "**Passthrough zeroes**"
1. Нажмите кнопку "**Mount**"

![]({{ base_path }}/images/screenshots/hdm_safe.png) 
{: .text-center}
{: .notice--info}
	
1. Если всё сделано верно, в "**Мой компьютер**" появится диск с выбранной буковой. Откройте его
1. Перейдите в папку `save` и найдите там файл `8000000000000010` Сделайте его резервную копию на ПК
1. Скопируйте файл `8000000000000010`, который мы ранее подписали в папку `save` с заменой (**объединить** на macOS)
1. После окончания копирования отмонтируйте диск, нажав на кнопку "**Unmount**" в окне HacDiskMount
1. Отключите консоль от ПК, удерживая кнопку (POWER) 30 секунд, затем включите консоль
1. Для проверки того привязан аккаунт или нет, попробуйте запустить eShop или перейдите в настройки профиля и убедитесь в том, что в нем есть список недавно запущенных игр.
	* Если приставка не запускается, повторите всё с самого начала, только вместо подписанного файла `8000000000000010` восстановите оригинальный. 
{% endspoiler %}

___

[Закрыть страницу](javascript:window.close();)
{: .notice--success}
